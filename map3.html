<!DOCTYPE html>
<html>
<head>
  <!-- <script type ="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> -->
  <!-- <script type ="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyARcbouYh7djP2yP-gdGqNpk4PW61B8E2E&callback=initialize"></script> -->
  <!-- <script type ="text/javascript" src="./map_directions.js"></script> -->

  <style>
    html,
    body {
      font-family: Arial, sans-serif;
      height: 100%;
      margin: 0;
      padding: 0;
    }
    #map {
      height: 50%;
    }
    #option {
      margin: 0;
      padding: 10px;
      background-color: lemonchiffon;
      border-radius: 25px;
    }
  </style>

</head>
<body>

<h1>Time2Go</h1>
<br />

<div>
  <!-- add in IP/cell tower auto detect -->
  <input id="zoom-to-area-text" type="text" placeholder="Enter your favorite area!">
  <input id="zoom-to-area" type="button" value="Zoom">
</div>

<div>
  <input id="destination" type="text" value="Bethesda, MD">
</div>


<div id="option" name="walk">Walk</div>
<div id="option">Bike</div>
<div id="option">Bikeshare</div>
<div id="option">Drive</div>
<div id="option">Rideshare</div>


<div>
<strong>Start: </strong>
<select id="start" onchange="calcRoute();">
  <option value="los angeles, ca">Los Angeles</option>
</select>
<strong>End: </strong>
<select id="end" onchange="calcRoute();">
  <option value="chicago, il">Chicago</option>
</select>
</div>

<div>
<strong>Mode of Travel: </strong>
<select id="mode" onchange="calcRoute();">
  <option value="DRIVING">Driving</option>
  <option value="WALKING">Walking</option>
  <option value="BICYCLING">Bicycling</option>
  <option value="TRANSIT">Transit</option>
</select>
</div>

<div id="map" style="float:left; width:70%; height:100%"></div>

<!-- <div id="directionsPanel" style="float:right;width:30%;height 100%"></div> -->

    <script>
      var map;
      function initMap() {

        // map style from Adam Krogh, https://snazzymaps.com/style/2/midnight-commander.

        var mapStyle = [{"featureType":"all","stylers":[{"saturation":0},{"hue":"#e7ecf0"}]},{"featureType":"road","stylers":[{"saturation":-70}]},{"featureType":"transit","stylers":[{"visibility":"off"}]},{"featureType":"poi","stylers":[{"visibility":"off"}]},{"featureType":"water","stylers":[{"visibility":"simplified"},{"saturation":-60}]}
          ]

        // Constructor creates a new map - only center and zoom are required.
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 38.889839, lng: -77.036042},
          zoom: 13,
          styles: mapStyle,
          mapTypeControl: false
        });
      }

      document.getElementById('zoom-to-area').addEventListener('click', function() {
          zoomToArea();
        });
        document.getElementById('option').addEventListener('click', function() {
              modeOptionStyle();
          });

        function modeOptionStyle(){
          console.log("div clicked")
        };

        function zoomToArea() {
        // Initialize the geocoder.
        var geocoder = new google.maps.Geocoder();
        // Get the address or place that the user entered.
        var address = document.getElementById('zoom-to-area-text').value;
        // Make sure the address isn't blank.
        if (address == '') {
          window.alert("Please submit an address. Currently you're going nowhere (directionally-speaking, not in life)");
        } else {
          // Geocode the address/area entered to get the center. Then, center the map
          // on it and zoom in
          geocoder.geocode(
            { address: address},
            function(results, status) {
              if (status == google.maps.GeocoderStatus.OK) {
                map.setCenter(results[0].geometry.location);
                map.setZoom(15);
              } else {
                window.alert('We could not find that location - try entering a more' +
                    ' specific place.');
              }
            });
          }
        }




        function displayDirections(origin) {
          var directionsService = new google.maps.DirectionsService;
          // Get the destination address from the user entered value.
          var origin = "Arlington, VA"
          var destinationAddress =
              document.getElementById('destination').value;
              console.log("destinationAddress:"+document.getElementById('destination').value)

          // Get mode again from the user entered value.
          var mode = document.getElementById('mode').value;
          directionsService.route({
            // The origin is the passed in marker's position.
            origin: origin,
            // The destination is user entered address.
            destination: destinationAddress,
            travelMode: google.maps.TravelMode[mode]
          }, function(response, status) {
            if (status === google.maps.DirectionsStatus.OK) {
              var directionsDisplay = new google.maps.DirectionsRenderer({
                map: map,
                directions: response,
                draggable: true,
                polylineOptions: {
                  strokeColor: 'green'
                }
              });
            } else {
              window.alert('Directions request failed due to ' + status);
            }
          });
        }



    </script>

    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyARcbouYh7djP2yP-gdGqNpk4PW61B8E2E&v=3&callback=initMap">
    </script>


</body>
</html>
